<div class="container modern-container mt-4">
  <h4 class="modern-title">üìÅ Manage Categories</h4>

  <!-- üîÑ Loading Spinner -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary modern-spinner" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted modern-text">Loading categories...</p>
  </div>

  <!-- ‚ûï Create Form -->
  <div class="card modern-card mb-4">
    <div class="card-body modern-card-body">
      <h5 class="card-title modern-card-title">Create Category</h5>
      <div class="row g-3 align-items-center">
        <div class="col-md-3">
          <input
            [(ngModel)]="newCategory.name"
            class="form-control modern-input"
            placeholder="Name" />
        </div>
        <div class="col-md-4">
          <input
            [(ngModel)]="newCategory.description"
            class="form-control modern-input"
            placeholder="Description" />
        </div>
        <div class="col-md-3">
          <input
            [(ngModel)]="newCategory.icon"
            class="form-control modern-input"
            placeholder="Icon (e.g., bi-camera)" />
        </div>
        <div class="col-md-2">
          <button
            class="btn modern-btn modern-btn-primary w-100"
            (click)="createCategory()">
            Create
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- üîç Search Input -->
  <div class="search-container mb-4">
    <input
      type="text"
      class="form-control modern-input"
      [(ngModel)]="searchTerm"
      (input)="applyFilters()"
      placeholder="Search categories..." />
  </div>

  <!-- üìã Category Table -->
  <div class="table-responsive">
    <table class="table modern-table">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Description</th>
          <th>Icon</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cat of filteredCategories | slice:(page-1)*pageSize:page*pageSize; let i = index" class="modern-table-row">
          <td>{{ i + 1 + ((page - 1) * pageSize) }}</td>
          <td>{{ cat.name }}</td>
          <td>{{ cat.description }}</td>
          <td>
            <i [class]="'bi ' + cat.icon" class="modern-icon"></i>
            <small class="text-muted ms-1">{{ cat.icon }}</small>
          </td>
          <td>
            <div class="action-buttons d-flex align-items-center">
              <button
                class="btn modern-btn modern-btn-sm modern-btn-danger"
                (click)="deleteCategory(cat.id)">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- üî¢ Pagination -->
  <div class="pagination-container d-flex justify-content-between align-items-center mt-4">
    <button
      class="btn modern-btn modern-btn-outline modern-btn-sm"
      (click)="prevPage()"
      [disabled]="page === 1">
      Previous
    </button>
    <span class="page-info">Page {{ page }}</span>
    <button
      class="btn modern-btn modern-btn-outline modern-btn-sm"
      (click)="nextPage()"
      [disabled]="(page * pageSize) >= filteredCategories.length">
      Next
    </button>
  </div>
</div>
